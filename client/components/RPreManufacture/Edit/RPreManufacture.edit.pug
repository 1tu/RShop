v-container(text-xs-center)
  v-layout(row wrap)
    v-flex.mb-3(xs12)
      h2 PreManufacture {{ model.id? 'edit' : 'create' }}
    v-flex(xs12)
      v-form(@submit.prevent='submit')
        v-text-field(label='Название' v-model='model.name' name='name'
          v-validate='"required|max:100"' :error-messages='errors.collect("name")')

        v-text-field(label='Описание' v-model='model.description' name='description' multi-line rows='2' auto-grow)

        v-select(label='Продукт' v-model='model.manufacture' autocomplete @change='onSelectManufacture($event)'
          :items='manufactureList' item-text='product.name' item-value='id' return-object
          name='manufacture' v-validate='"required"' :error-messages='errors.collect("manufacture")')

        h2 Конфиг
        v-layout(row v-if='model.manufacture' wrap v-for='(item, index) in model.config' :key='index')
          v-flex(md3 xs12)
            span {{ item.name }}

          v-flex(md6 xs12)
            v-select(label='Значение' v-model='item.value' :name='"value " + (index + 1)'
              :items='model.manufacture.schema[index].optionList' item-text='name' item-value='value'
              :error-messages='errors.collect("value " + (index + 1))')

          v-flex(md3 xs12)
            v-checkbox(label='Не изменяемо' v-model='item.isLocked')


        v-btn(type='submit') submit
        v-btn( @click='clear') clear
